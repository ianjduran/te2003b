/*
 * poll_keyboard_task.c
 *
 *  Created on: May 30, 2022
 *      Author: Ian Duran
 */

#include "poll_keyboard_task.h"


extern osMessageQueueId_t inputQueueHandle;
uint8_t pollButton(uint8_t row, uint8_t col){
	//Set all row pins to 1, except polling row
	for(int i = 4; i < 8; i++){
		GPIOA->ODR |= 1 << i;
	}
	GPIOA->ODR &= ~(1 << row);

	//Read col
	//return 0;
	return GPIOA->IDR & (1 << col);
}


void poll_keyboard_button_task(void){
	/* FAVOR DE IGNORAR, NI SE SI ESTA BIEN*/
//	uint8_t selectedChar = 0xff;
//
//	for(int i = 0; i < 4; i++){
//	  for(int j = 0; j < 4; j++){
//		  int out = pollButton(j + 4, i);
//		  int index = i * 4 + j;
//
//	  }
//	}
	uint8_t sendJelp = 15;
	while(1){
		osMessagePut(inputQueueHandle, &sendJelp, 200);
	}

	// Read col
}


